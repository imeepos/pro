# Docker é•œåƒç‰ˆæœ¬ç®¡ç†æŒ‡å—

åŸºäº Git Tag çš„ç‰ˆæœ¬åŒ–é•œåƒæ„å»ºä¸å›æ»šæ–¹æ¡ˆ,å®ç°ç²¾ç¡®çš„ç‰ˆæœ¬æ§åˆ¶å’Œå¿«é€Ÿå›æ»šèƒ½åŠ›ã€‚

---

## ğŸ“š ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è„šæœ¬è¯´æ˜](#è„šæœ¬è¯´æ˜)
- [ç‰ˆæœ¬ç®¡ç†æµç¨‹](#ç‰ˆæœ¬ç®¡ç†æµç¨‹)
- [å›æ»šæ“ä½œ](#å›æ»šæ“ä½œ)
- [é•œåƒæ¸…ç†](#é•œåƒæ¸…ç†)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker 18.09+ (æ”¯æŒ BuildKit)
- Docker Compose 1.27+
- Git 2.0+
- Bash 4.0+

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# è®¾ç½®é•œåƒä»“åº“åœ°å€ (å¿…éœ€)
export REGISTRY="your-registry.com/pro"

# å¯ç”¨ Docker BuildKit (æ¨è)
export DOCKER_BUILDKIT=1
```

å¯ä»¥å°†ä»¥ä¸Šé…ç½®æ·»åŠ åˆ° `~/.bashrc` æˆ– `~/.zshrc`:

```bash
# æ·»åŠ åˆ° shell é…ç½®æ–‡ä»¶
echo 'export REGISTRY="your-registry.com/pro"' >> ~/.bashrc
echo 'export DOCKER_BUILDKIT=1' >> ~/.bashrc
source ~/.bashrc
```

---

## ğŸ“¦ è„šæœ¬è¯´æ˜

### 1. build-image.sh - é•œåƒæ„å»ºè„šæœ¬

**åŠŸèƒ½**: åŸºäº Git Tag æˆ– Commit Hash æ„å»ºç‰ˆæœ¬åŒ– Docker é•œåƒ

**ç”¨æ³•**:
```bash
./scripts/build-image.sh <service> [version]
```

**å‚æ•°**:
- `service` (å¿…éœ€): æœåŠ¡åç§° (`api`, `web`, `admin`, `crawler`, `cleaner`, `broker`)
- `version` (å¯é€‰): ç‰ˆæœ¬æ ‡ç­¾,é»˜è®¤ä½¿ç”¨å½“å‰ commit hash

**ç¤ºä¾‹**:
```bash
# ä½¿ç”¨å½“å‰ commit hash æ„å»º
./scripts/build-image.sh api

# ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬æ ‡ç­¾æ„å»º
./scripts/build-image.sh api v1.2.3

# ä½¿ç”¨ git describe æ„å»º
./scripts/build-image.sh web $(git describe --tags)

# ä½¿ç”¨ç¯å¢ƒå˜é‡æŒ‡å®šä»“åº“
REGISTRY="my-registry.com/pro" ./scripts/build-image.sh api v1.0.0
```

**æ„å»ºäº§ç‰©**:
- `{REGISTRY}/{service}:{version}` - ç‰ˆæœ¬åŒ–é•œåƒ
- `{REGISTRY}/{service}:latest` - æœ€æ–°ç‰ˆæœ¬é•œåƒ

---

### 2. rollback.sh - é•œåƒå›æ»šè„šæœ¬

**åŠŸèƒ½**: å¿«é€Ÿå›æ»šæœåŠ¡åˆ°æŒ‡å®šç‰ˆæœ¬

**ç”¨æ³•**:
```bash
./scripts/rollback.sh <service> [target-version]
```

**å‚æ•°**:
- `service` (å¿…éœ€): æœåŠ¡åç§°
- `target-version` (å¯é€‰): ç›®æ ‡ç‰ˆæœ¬,ä¸æŒ‡å®šåˆ™åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬

**ç¤ºä¾‹**:
```bash
# åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬
./scripts/rollback.sh api

# æ˜¾ç¤ºå½“å‰è¿è¡Œç‰ˆæœ¬
./scripts/rollback.sh api --show-current

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
./scripts/rollback.sh api v1.2.2

# ä½¿ç”¨ä¸åŒçš„ docker-compose æ–‡ä»¶
COMPOSE_FILE=docker-compose.prod.yml ./scripts/rollback.sh api v1.2.2
```

**å›æ»šæµç¨‹**:
1. æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬å’Œç›®æ ‡ç‰ˆæœ¬
2. ç¡®è®¤å›æ»šæ“ä½œ
3. æ£€æŸ¥ç›®æ ‡é•œåƒæ˜¯å¦å­˜åœ¨
4. åœæ­¢å½“å‰æœåŠ¡
5. å¯åŠ¨æ–°ç‰ˆæœ¬æœåŠ¡
6. éªŒè¯æœåŠ¡çŠ¶æ€
7. æ˜¾ç¤ºæœåŠ¡æ—¥å¿—

---

### 3. clean-images.sh - é•œåƒæ¸…ç†è„šæœ¬

**åŠŸèƒ½**: æ¸…ç†æ—§ç‰ˆæœ¬é•œåƒ,é‡Šæ”¾ç£ç›˜ç©ºé—´

**ç”¨æ³•**:
```bash
./scripts/clean-images.sh [service] [keep-count]
```

**å‚æ•°**:
- `service` (å¯é€‰): æœåŠ¡åç§°,ä¸æŒ‡å®šåˆ™æ¸…ç†æ‰€æœ‰æœåŠ¡
- `keep-count` (å¯é€‰): ä¿ç•™ç‰ˆæœ¬æ•°,é»˜è®¤ 5 ä¸ª

**ç¤ºä¾‹**:
```bash
# æ¸…ç†æ‰€æœ‰æœåŠ¡,ä¿ç•™æœ€è¿‘ 5 ä¸ªç‰ˆæœ¬
./scripts/clean-images.sh

# æ¸…ç† api æœåŠ¡,ä¿ç•™æœ€è¿‘ 10 ä¸ªç‰ˆæœ¬
./scripts/clean-images.sh api 10

# ä»…æ¸…ç†æ‚¬ç©ºé•œåƒ (dangling images)
./scripts/clean-images.sh --dangling

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ
./scripts/clean-images.sh --all
```

**å®‰å…¨ç‰¹æ€§**:
- æ˜¾ç¤ºæ¸…ç†å‰åçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
- åˆ—å‡ºå°†è¦åˆ é™¤çš„é•œåƒ
- éœ€è¦ç”¨æˆ·ç¡®è®¤æ‰æ‰§è¡Œåˆ é™¤
- è·³è¿‡æ­£åœ¨ä½¿ç”¨çš„é•œåƒ

---

## ğŸ”„ ç‰ˆæœ¬ç®¡ç†æµç¨‹

### å®Œæ•´çš„ç‰ˆæœ¬å‘å¸ƒæµç¨‹

```bash
# 1. å¼€å‘å®Œæˆå,ç¡®ä¿æ‰€æœ‰æ”¹åŠ¨å·²æäº¤
git status
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ (ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬)
git tag -a v1.2.3 -m "Release v1.2.3: æ·»åŠ  XXX åŠŸèƒ½"
git push origin v1.2.3

# 3. æ„å»ºé•œåƒ
./scripts/build-image.sh api v1.2.3

# 4. æ¨é€é•œåƒåˆ°ä»“åº“ (è„šæœ¬ä¼šæç¤º)
# è¾“å…¥ 'y' ç¡®è®¤æ¨é€

# 5. éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
docker-compose -f docker-compose.test.yml pull api
docker-compose -f docker-compose.test.yml up -d api

# 6. æµ‹è¯•é€šè¿‡å,éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.prod.yml pull api
docker-compose -f docker-compose.prod.yml up -d api

# 7. éªŒè¯éƒ¨ç½²
./scripts/rollback.sh api --show-current
docker logs -f pro-api
```

### è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ

éµå¾ª [Semantic Versioning 2.0.0](https://semver.org/lang/zh-CN/) è§„èŒƒ:

```
v{MAJOR}.{MINOR}.{PATCH}[-{PRERELEASE}][+{BUILD}]
```

**ç‰ˆæœ¬å·é€’å¢è§„åˆ™**:
- **MAJOR**: ä¸å…¼å®¹çš„ API ä¿®æ”¹ (å¦‚ v1.0.0 â†’ v2.0.0)
- **MINOR**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢ (å¦‚ v1.0.0 â†’ v1.1.0)
- **PATCH**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ (å¦‚ v1.0.0 â†’ v1.0.1)
- **PRERELEASE**: é¢„å‘å¸ƒç‰ˆæœ¬ (å¦‚ v1.0.0-alpha.1, v1.0.0-rc.1)

**ç¤ºä¾‹**:
```bash
# ä¸»ç‰ˆæœ¬æ›´æ–° (Breaking Changes)
git tag -a v2.0.0 -m "Release v2.0.0: é‡æ„ API æ¥å£"

# æ¬¡ç‰ˆæœ¬æ›´æ–° (æ–°åŠŸèƒ½)
git tag -a v1.3.0 -m "Release v1.3.0: æ–°å¢ç”¨æˆ·ç®¡ç†åŠŸèƒ½"

# è¡¥ä¸ç‰ˆæœ¬ (Bug ä¿®å¤)
git tag -a v1.2.1 -m "Release v1.2.1: ä¿®å¤ç™»å½•è¶…æ—¶é—®é¢˜"

# é¢„å‘å¸ƒç‰ˆæœ¬
git tag -a v1.4.0-beta.1 -m "Release v1.4.0-beta.1: æµ‹è¯•æ–°æ”¯ä»˜åŠŸèƒ½"
```

---

## âª å›æ»šæ“ä½œ

### åœºæ™¯ 1: ç´§æ€¥å›æ»š

å½“ç”Ÿäº§ç¯å¢ƒå‡ºç°ä¸¥é‡é—®é¢˜æ—¶,å¿«é€Ÿå›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬:

```bash
# 1. æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å’Œå¯ç”¨ç‰ˆæœ¬
./scripts/rollback.sh api

# 2. å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
./scripts/rollback.sh api v1.2.2

# 3. éªŒè¯å›æ»šç»“æœ
./scripts/rollback.sh api --show-current
docker logs -f pro-api

# 4. æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:3000/health
```

### åœºæ™¯ 2: ç°åº¦å›æ»š

åœ¨å¤šå®ä¾‹ç¯å¢ƒä¸­é€æ­¥å›æ»š:

```bash
# 1. å›æ»šéƒ¨åˆ†å®ä¾‹ (ä½¿ç”¨ Docker Swarm)
docker service update \
  --image your-registry.com/pro/api:v1.2.2 \
  --update-parallelism 1 \
  --update-delay 30s \
  pro_api

# 2. è§‚å¯Ÿç›‘æ§æŒ‡æ ‡,ç¡®è®¤ç¨³å®šåç»§ç»­

# 3. å›æ»šå‰©ä½™å®ä¾‹
docker service update pro_api --force
```

### åœºæ™¯ 3: å›æ»šåé‡æ–°æ„å»º

å¦‚æœéœ€è¦åœ¨æ—§ç‰ˆæœ¬åŸºç¡€ä¸Šä¿®å¤:

```bash
# 1. å›æ»šä»£ç åˆ°æ—§ç‰ˆæœ¬
git checkout v1.2.2

# 2. ä¿®å¤é—®é¢˜
# ... ç¼–è¾‘ä»£ç  ...

# 3. åˆ›å»ºè¡¥ä¸ç‰ˆæœ¬
git add .
git commit -m "fix: ä¿®å¤ XXX é—®é¢˜"
git tag -a v1.2.3 -m "Release v1.2.3: ä¿®å¤ XXX é—®é¢˜"

# 4. æ„å»ºæ–°é•œåƒ
./scripts/build-image.sh api v1.2.3

# 5. éƒ¨ç½²æ–°ç‰ˆæœ¬
./scripts/rollback.sh api v1.2.3
```

---

## ğŸ§¹ é•œåƒæ¸…ç†

### å®šæœŸæ¸…ç†ç­–ç•¥

å»ºè®®æ¯å‘¨æˆ–æ¯æœˆæ‰§è¡Œä¸€æ¬¡é•œåƒæ¸…ç†,é‡Šæ”¾ç£ç›˜ç©ºé—´:

```bash
# 1. æŸ¥çœ‹å½“å‰ç£ç›˜ä½¿ç”¨æƒ…å†µ
docker system df

# 2. æ¸…ç†æ‰€æœ‰æœåŠ¡çš„æ—§é•œåƒ (ä¿ç•™æœ€è¿‘ 5 ä¸ªç‰ˆæœ¬)
./scripts/clean-images.sh

# 3. æ¸…ç†æ‚¬ç©ºé•œåƒ
./scripts/clean-images.sh --dangling

# 4. æ¸…ç†æœªä½¿ç”¨çš„é•œåƒã€å®¹å™¨ã€ç½‘ç»œã€å·
docker system prune -a --volumes
```

### è‡ªåŠ¨åŒ–æ¸…ç†

ä½¿ç”¨ cron å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ¸…ç†:

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ (æ¯å‘¨æ—¥å‡Œæ™¨ 2 ç‚¹æ¸…ç†)
0 2 * * 0 cd /path/to/pro && ./scripts/clean-images.sh api 5 >> /var/log/docker-clean.log 2>&1
```

### ä¿ç•™ç­–ç•¥å»ºè®®

| ç¯å¢ƒ | ä¿ç•™ç‰ˆæœ¬æ•° | è¯´æ˜ |
|------|-----------|------|
| ç”Ÿäº§ç¯å¢ƒ | 10-20 | ä¿ç•™è¶³å¤Ÿçš„å†å²ç‰ˆæœ¬ç”¨äºå›æ»š |
| æµ‹è¯•ç¯å¢ƒ | 5-10 | ä¿ç•™è¿‘æœŸç‰ˆæœ¬ç”¨äºå¯¹æ¯”æµ‹è¯• |
| å¼€å‘ç¯å¢ƒ | 3-5 | ä»…ä¿ç•™æœ€æ–°ç‰ˆæœ¬,èŠ‚çœç©ºé—´ |

---

## âœ… æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬å‘½åè§„èŒƒ

```bash
# âœ… æ¨è
v1.2.3
v1.2.3-beta.1
v1.2.3-rc.2

# âŒ ä¸æ¨è
1.2.3 (ç¼ºå°‘ v å‰ç¼€)
version-1.2.3 (æ ¼å¼ä¸æ ‡å‡†)
release_1.2.3 (ä½¿ç”¨ä¸‹åˆ’çº¿)
```

### 2. Git Tag æ¶ˆæ¯è§„èŒƒ

```bash
# âœ… æ¨è - åŒ…å«è¯¦ç»†çš„å˜æ›´è¯´æ˜
git tag -a v1.2.3 -m "Release v1.2.3

æ–°åŠŸèƒ½:
- æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†
- æ”¯æŒæ‰¹é‡å¯¼å…¥æ•°æ®

Bug ä¿®å¤:
- ä¿®å¤ç™»å½•è¶…æ—¶é—®é¢˜
- è§£å†³æ–‡ä»¶ä¸Šä¼ å¤±è´¥é—®é¢˜

æ€§èƒ½ä¼˜åŒ–:
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
"

# âŒ ä¸æ¨è - æ¶ˆæ¯è¿‡äºç®€å•
git tag -a v1.2.3 -m "update"
```

### 3. æ„å»ºå‰æ£€æŸ¥

```bash
# ç¡®ä¿å·¥ä½œç›®å½•å¹²å‡€
git status

# ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
bun test

# ç¡®ä¿ç±»å‹æ£€æŸ¥é€šè¿‡
bun run --filter=@pro/api typecheck

# ç¡®ä¿ä»£ç æ ¼å¼æ­£ç¡®
bun run lint
```

### 4. é•œåƒæ ‡ç­¾ç­–ç•¥

```bash
# å§‹ç»ˆåŒæ—¶æ¨é€ç‰ˆæœ¬æ ‡ç­¾å’Œ latest æ ‡ç­¾
your-registry.com/pro/api:v1.2.3    # ç²¾ç¡®ç‰ˆæœ¬
your-registry.com/pro/api:latest    # æœ€æ–°ç‰ˆæœ¬
your-registry.com/pro/api:v1.2      # æ¬¡ç‰ˆæœ¬ (å¯é€‰)
your-registry.com/pro/api:v1        # ä¸»ç‰ˆæœ¬ (å¯é€‰)
```

### 5. ç‰ˆæœ¬æ–‡æ¡£è®°å½•

åœ¨ä»“åº“ä¸­ç»´æŠ¤ `CHANGELOG.md` æ–‡ä»¶:

```markdown
# Changelog

## [v1.2.3] - 2025-01-15

### Added
- ç”¨æˆ·æƒé™ç®¡ç†åŠŸèƒ½
- æ‰¹é‡æ•°æ®å¯¼å…¥æ¥å£

### Fixed
- ä¿®å¤ç™»å½•è¶…æ—¶é—®é¢˜
- è§£å†³æ–‡ä»¶ä¸Šä¼ å¤±è´¥é—®é¢˜

### Changed
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬
```

### 6. å›æ»šæµ‹è¯•

åœ¨éç”Ÿäº§ç¯å¢ƒå®šæœŸæ¼”ç»ƒå›æ»šæµç¨‹:

```bash
# æ¯æœˆæ‰§è¡Œä¸€æ¬¡å›æ»šæ¼”ç»ƒ
# 1. éƒ¨ç½²æ–°ç‰ˆæœ¬
./scripts/build-image.sh api v1.3.0
./scripts/rollback.sh api v1.3.0

# 2. æ¨¡æ‹Ÿæ•…éšœ,æ‰§è¡Œå›æ»š
./scripts/rollback.sh api v1.2.3

# 3. éªŒè¯å›æ»šååŠŸèƒ½æ­£å¸¸
# 4. è®°å½•å›æ»šæ—¶é—´å’Œé—®é¢˜
```


---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: é•œåƒæ¨é€å¤±è´¥

**ç—‡çŠ¶**:
```
Error: denied: requested access to the resource is denied
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ Docker ç™»å½•çŠ¶æ€
docker login your-registry.com

# 2. æ£€æŸ¥é•œåƒä»“åº“æƒé™
# ç¡®ä¿å½“å‰ç”¨æˆ·æœ‰æ¨é€æƒé™

# 3. æ£€æŸ¥ REGISTRY ç¯å¢ƒå˜é‡
echo $REGISTRY

# 4. æ‰‹åŠ¨æ¨é€æµ‹è¯•
docker push your-registry.com/pro/api:v1.2.3
```

### é—®é¢˜ 2: å›æ»šåæœåŠ¡æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**:
```
Error: container exited with code 1
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs pro-api

# 2. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
docker inspect pro-api | grep -A 20 "Env"

# 3. æ£€æŸ¥ä¾èµ–æœåŠ¡çŠ¶æ€
docker-compose ps

# 4. å°è¯•æ‰‹åŠ¨å¯åŠ¨å®¹å™¨è°ƒè¯•
docker run -it --rm \
  --entrypoint /bin/sh \
  your-registry.com/pro/api:v1.2.3
```

### é—®é¢˜ 3: æ„å»ºç¼“å­˜å¤±æ•ˆ

**ç—‡çŠ¶**:
æ„å»ºé€Ÿåº¦æ…¢,æ‰€æœ‰å±‚éƒ½é‡æ–°æ„å»º

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. ç¡®ä¿å¯ç”¨ BuildKit
export DOCKER_BUILDKIT=1

# 2. æ˜¾å¼æŒ‡å®šç¼“å­˜æº
docker buildx build \
  --cache-from your-registry.com/pro/api:latest \
  --build-arg BUILDKIT_INLINE_CACHE=1 \
  ...

# 3. æ¸…ç†æŸåçš„ç¼“å­˜
docker builder prune
```

### é—®é¢˜ 4: ç£ç›˜ç©ºé—´ä¸è¶³

**ç—‡çŠ¶**:
```
Error: no space left on device
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
docker system df
df -h

# 2. æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨èµ„æº
docker system prune -a --volumes

# 3. æ¸…ç†æ—§ç‰ˆæœ¬é•œåƒ
./scripts/clean-images.sh api 3

# 4. æ¸…ç†æ„å»ºç¼“å­˜
docker builder prune -a
```

### é—®é¢˜ 5: Git Tag å†²çª

**ç—‡çŠ¶**:
```
fatal: tag 'v1.2.3' already exists
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æŸ¥çœ‹å·²å­˜åœ¨çš„æ ‡ç­¾
git show v1.2.3

# 2. å¦‚æœéœ€è¦è¦†ç›– (æ…ç”¨!)
git tag -f -a v1.2.3 -m "æ–°çš„ç‰ˆæœ¬è¯´æ˜"
git push origin v1.2.3 --force

# 3. æ¨èæ–¹å¼: ä½¿ç”¨æ–°çš„è¡¥ä¸ç‰ˆæœ¬
git tag -a v1.2.4 -m "ç‰ˆæœ¬è¯´æ˜"
```

---

## ğŸ“Š ç‰ˆæœ¬ç®¡ç†æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»£ç å¼€å‘å®Œæˆ  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡Œæµ‹è¯•     â”‚
â”‚ bun test    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ›å»º Git Tagâ”‚
â”‚ git tag -a  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ„å»ºé•œåƒ     â”‚
â”‚ build-image â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨é€é•œåƒ     â”‚
â”‚ docker push â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²æµ‹è¯•ç¯å¢ƒ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æµ‹è¯•éªŒè¯     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€[å¤±è´¥]â”€â”€â”€â”€â”€â”
       â”‚            â–¼
       â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚     â”‚ å›æ»šç‰ˆæœ¬     â”‚
       â”‚     â”‚ rollback.sh â”‚
       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€[æˆåŠŸ]â”€â”€â”€â”€â”
                   â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ ç›‘æ§å‘Šè­¦     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [Semantic Versioning è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [Docker BuildKit æ–‡æ¡£](https://docs.docker.com/build/buildkit/)
- [Docker Compose æ–‡æ¡£](https://docs.docker.com/compose/)
- [Git Tag æ–‡æ¡£](https://git-scm.com/book/zh/v2/Git-åŸºç¡€-æ‰“æ ‡ç­¾)

---

## ğŸ“ ç»´æŠ¤æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2025-01-15 | v1.0.0 | åˆå§‹ç‰ˆæœ¬,åˆ›å»ºç‰ˆæœ¬ç®¡ç†è„šæœ¬å’Œæ–‡æ¡£ |

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®,è¯·è”ç³»:
- æŠ€æœ¯æ”¯æŒ: tech-support@example.com
- é¡¹ç›®ä»“åº“: https://github.com/your-org/pro

---

**Happy Versioning! ğŸ‰**
