# 基础配置
NODE_ENV=development
PORT=3006
LOG_LEVEL=debug
SERVICE_NAME=@pro/aggregator
SERVICE_VERSION=1.0.0

# 数据库配置
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/pro
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=pro

# RabbitMQ
RABBITMQ_URL=amqp://localhost:5672
ANALYSIS_RESULT_QUEUE=analysis_result_queue

# Redis配置
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# 缓存TTL配置 (秒)
CACHE_TTL_REALTIME=300
CACHE_TTL_HOURLY=7200
CACHE_TTL_DAILY=86400
CACHE_TTL_WINDOW=3600
CACHE_TTL_ARCHIVE=2592000

# 缓存策略配置
CACHE_MAX_MEMORY=256mb
CACHE_EVICTION_POLICY=allkeys-lru
CACHE_WARMING_ENABLED=true
CACHE_WARMING_BATCH_SIZE=100
CACHE_WARMING_INTERVAL_MS=60000

# 批量处理配置
BATCH_PROCESSING_DEFAULT=1000
BATCH_PROCESSING_HIGH_THROUGHPUT=5000
BATCH_PROCESSING_LOW_LATENCY=100

BATCH_TRANSACTION_DEFAULT=500
BATCH_TRANSACTION_BULK_INSERT=2000
BATCH_TRANSACTION_ANALYSIS=1000

BATCH_QUEUE_CONSUMER=10
BATCH_QUEUE_PUBLISHER=5

# 重试配置
RETRY_MAX_ATTEMPTS_DATABASE=3
RETRY_MAX_ATTEMPTS_EXTERNAL=5
RETRY_MAX_ATTEMPTS_CACHE=2
RETRY_MAX_ATTEMPTS_NETWORK=3

RETRY_BACKOFF_TYPE=exponential
RETRY_BACKOFF_BASE_DELAY_MS=1000
RETRY_BACKOFF_MAX_DELAY_MS=30000
RETRY_BACKOFF_JITTER_FACTOR=0.1

RETRY_TIMEOUT_DATABASE=30000
RETRY_TIMEOUT_EXTERNAL=15000
RETRY_TIMEOUT_CACHE=5000
RETRY_TIMEOUT_NETWORK=10000

# 监控配置
MONITORING_THRESHOLD_CPU=80
MONITORING_THRESHOLD_MEMORY=85
MONITORING_THRESHOLD_DISK_SPACE=90
MONITORING_THRESHOLD_RESPONSE_TIME=1000

MONITORING_HEALTH_CHECK_INTERVAL_MS=30000
MONITORING_HEALTH_CHECK_TIMEOUT_MS=5000
MONITORING_HEALTH_CHECK_GRACE_PERIOD_MS=60000

MONITORING_ALERT_ERROR_RATE=5
MONITORING_ALERT_LATENCY_P99=2000
MONITORING_ALERT_FAILURE_COUNT=10

# 时间窗口配置 (秒)
TIME_WINDOW_SLIDING_SHORT_TERM=300
TIME_WINDOW_SLIDING_MEDIUM_TERM=3600
TIME_WINDOW_SLIDING_LONG_TERM=86400

TIME_WINDOW_RETENTION_RAW_DATA=604800
TIME_WINDOW_RETENTION_AGGREGATED=2592000
TIME_WINDOW_RETENTION_METRICS=7776000
TIME_WINDOW_RETENTION_LOGS=1209600

TIME_WINDOW_AGGREGATION_INTERVAL_MS=60000
TIME_WINDOW_AGGREGATION_BATCH_SIZE=1000
TIME_WINDOW_AGGREGATION_FLUSH_THRESHOLD=5000

# 韧性配置
RESILIENCE_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
RESILIENCE_CIRCUIT_BREAKER_TIMEOUT_MS=60000
RESILIENCE_CIRCUIT_BREAKER_RESET_TIMEOUT_MS=300000

RESILIENCE_BULKHEAD_ISOLATION=true
RESILIENCE_BULKHEAD_MAX_CONCURRENT=10
RESILIENCE_BULKHEAD_QUEUE_SIZE=100

RESILIENCE_RATE_LIMIT_REQUESTS=1000
RESILIENCE_RATE_LIMIT_WINDOW_MS=60000
RESILIENCE_RATE_LIMIT_BURST_CAPACITY=100

# 聚合设置（保持原有配置兼容性）
HOURLY_WINDOW_SIZE=60
DAILY_ROLLUP_HOUR=3
WINDOW_UPDATE_INTERVAL=300000
