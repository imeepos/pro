# Web å‰ç«¯åº”ç”¨

åŸºäº Angular 20 çš„ç°ä»£åŒ–å‰ç«¯åº”ç”¨ï¼Œæä¾›æ•°æ®å±•ç¤ºã€ç”¨æˆ·äº¤äº’å’Œå®æ—¶æ›´æ–°åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 20.0.0
- pnpm >= 9.0.0

### å¼€å‘å‘½ä»¤

```bash
# è¿›å…¥ç›®å½•
cd apps/web

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev

# ç±»å‹æ£€æŸ¥
pnpm run typecheck

# ä»£ç æ„å»º
pnpm run build

# è¿è¡Œæµ‹è¯•
pnpm run test

# ä»£ç æ£€æŸ¥
pnpm run lint
```

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Angular 20 + Standalone Components
- **UI åº“**: TailwindCSS
- **çŠ¶æ€ç®¡ç†**: Akita
- **å®æ—¶é€šä¿¡**: Socket.IO
- **è®¤è¯**: JWT + Token åˆ·æ–°æœºåˆ¶

### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ guards/          # è·¯ç”±å®ˆå«
â”‚   â”‚   â”œâ”€â”€ interceptors/    # HTTP æ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ services/        # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â””â”€â”€ state/           # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ features/            # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ screen/         # å¤§å±å±•ç¤º
â”‚   â”‚   â””â”€â”€ api-key-management/ # API å¯†é’¥ç®¡ç†
â”‚   â””â”€â”€ shared/             # å…±äº«ç»„ä»¶
â”œâ”€â”€ environments/           # ç¯å¢ƒé…ç½®
â””â”€â”€ assets/                # é™æ€èµ„æº
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯
- JWT Token è®¤è¯
- è‡ªåŠ¨ Token åˆ·æ–°
- è·¯ç”±æƒé™æ§åˆ¶
- ç™»å½•çŠ¶æ€æŒä¹…åŒ–

### 2. å¤§å±å±•ç¤º
- æ•°æ®å¯è§†åŒ–å±•ç¤º
- å®æ—¶æ•°æ®æ›´æ–°
- å“åº”å¼è®¾è®¡
- äº¤äº’å¼ç•Œé¢

### 3. API ç®¡ç†
- API å¯†é’¥ç”Ÿæˆ
- æƒé™é…ç½®ç®¡ç†
- ä½¿ç”¨ç»Ÿè®¡ç›‘æ§

## ğŸ¨ ç»„ä»¶ç³»ç»Ÿ

### å±•ç¤ºç»„ä»¶
- `weibo-logged-in-users-card`: å¾®åšå·²ç™»å½•ç”¨æˆ·ç»Ÿè®¡
- æ•°æ®å›¾è¡¨ç»„ä»¶
- çŠ¶æ€æŒ‡ç¤ºå™¨

### å…±äº«ç»„ä»¶
- è¡¨å•ç»„ä»¶
- åŠ è½½æŒ‡ç¤ºå™¨
- é”™è¯¯å¤„ç†ç»„ä»¶

## ğŸ“¡ å®æ—¶é€šä¿¡

### WebSocket è¿æ¥
```typescript
// è‡ªåŠ¨è¿æ¥ç®¡ç†
const wsManager = inject(WebSocketManager);
const wsService = wsManager.connectToNamespace(config);

// äº‹ä»¶ç›‘å¬
wsService.on('weibo:logged-in-users:update').subscribe(stats => {
  // å¤„ç†æ•°æ®æ›´æ–°
});
```

### æ•°æ®æ›´æ–°
- è‡ªåŠ¨é‡è¿æœºåˆ¶
- äº‹ä»¶è®¢é˜…ç®¡ç†
- è¿æ¥çŠ¶æ€ç›‘æ§

## ğŸ”§ å¼€å‘é…ç½®

### ç¯å¢ƒå˜é‡
```typescript
export const environment = {
  production: false,
  apiUrl: 'http://xxx:3000/api',
  tokenKey: 'access_token',
  refreshTokenKey: 'refresh_token',
  timeout: 30000
};
```

### ä¾èµ–æ³¨å…¥é…ç½®
- SkerSDK: API æ¥å£å°è£…
- TokenStorageService: Token ç®¡ç†
- HttpClientService: HTTP å®¢æˆ·ç«¯
- WebSocketManager: WebSocket ç®¡ç†

## ğŸ“¦ æ„å»ºéƒ¨ç½²

### Docker æ„å»º
```bash
# æ„å»ºé•œåƒ
docker build -t pro-web:latest .

# è¿è¡Œå®¹å™¨
docker run -p 4200:80 pro-web:latest
```

### ç”Ÿäº§éƒ¨ç½²
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build:prod

# éƒ¨ç½²åˆ°é™æ€æœåŠ¡å™¨
# dist/ ç›®å½•å¯ç›´æ¥éƒ¨ç½²
```

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm run test

# ç›‘å¬æ¨¡å¼
pnpm run test:watch

# è¦†ç›–ç‡æŠ¥å‘Š
pnpm run test:coverage
```

### E2E æµ‹è¯•
```bash
# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
pnpm run e2e
```

## ğŸ” å®‰å…¨ç‰¹æ€§

### è®¤è¯æœºåˆ¶
- JWT Token è®¤è¯
- è‡ªåŠ¨ Token åˆ·æ–°
- å®‰å…¨å­˜å‚¨ (httpOnly cookies å¯é€‰)

### æ•°æ®ä¿æŠ¤
- HTTPS å¼ºåˆ¶ä½¿ç”¨
- XSS é˜²æŠ¤
- CSRF ä¿æŠ¤

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²
- è·¯ç”±çº§åˆ«æ‡’åŠ è½½
- ç»„ä»¶æŒ‰éœ€åŠ è½½
- ç¬¬ä¸‰æ–¹åº“åˆ†ç¦»

### ç¼“å­˜ç­–ç•¥
- HTTP ç¼“å­˜é…ç½®
- é™æ€èµ„æºç¼“å­˜
- Service Worker é…ç½®

## ğŸ› è°ƒè¯•

### å¼€å‘å·¥å…·
- Angular DevTools
- Redux DevTools (Akita)
- Network é¢æ¿ç›‘æ§

### å¸¸è§é—®é¢˜
1. **WebSocket è¿æ¥å¤±è´¥**: æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€å’Œ Token æœ‰æ•ˆæ€§
2. **è®¤è¯å¤±è´¥**: æ£€æŸ¥ Token å­˜å‚¨å’Œåˆ·æ–°æœºåˆ¶
3. **API è°ƒç”¨é”™è¯¯**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæƒé™é…ç½®

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. éµå¾ª Angular ä»£ç è§„èŒƒ
2. ç¼–å†™å•å…ƒæµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. æäº¤å‰è¿›è¡Œç±»å‹æ£€æŸ¥

## ğŸ“„ è®¸å¯è¯

UNLICENSED - ä»…ä¾›å†…éƒ¨ä½¿ç”¨