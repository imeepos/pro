<div class="map-location-picker">
  <div class="status-panel" *ngIf="isLoading">
    <div class="spinner"></div>
    <span>地图正在苏醒，请稍候...</span>
  </div>

  <div class="status-panel error" *ngIf="!isLoading && errorMessage">
    <span class="status-icon">⚠️</span>
    <div class="status-text">
      <p class="status-title">无法载入地图</p>
      <p class="status-message">{{ errorMessage }}</p>
      <p class="status-hint">请确认环境变量中的高德地图 API Key 是否有效。</p>
    </div>
  </div>

  <div
    #mapHost
    class="map-canvas"
    [class.map-canvas--inactive]="errorMessage"
    [style.height]="height"
  ></div>

  <div class="selection" *ngIf="selectedPoint">
    <div class="coord">
      <span>经度</span>
      <strong>{{ selectedPoint.longitude | number: '1.6-6' }}</strong>
    </div>
    <div class="coord">
      <span>纬度</span>
      <strong>{{ selectedPoint.latitude | number: '1.6-6' }}</strong>
    </div>
    <ng-container *ngIf="formatPoint(selectedPoint) as summary">
      <div class="address">{{ summary }}</div>
    </ng-container>
    <button type="button" class="clear" (click)="clearSelection()">重新选择</button>
  </div>
</div>
