<div class="trend">
  @if (!trend || trend.length === 0) {
    <div class="trend__empty">暂无趋势数据</div>
  } @else {
    <div class="trend__chart">
      <svg viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
        <defs>
          <linearGradient id="trendGradient" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="rgba(59,130,246,0.2)"></stop>
            <stop offset="100%" stop-color="rgba(15,23,42,0.05)"></stop>
          </linearGradient>
        </defs>
        <rect x="0" y="0" width="100" height="100" fill="url(#trendGradient)"></rect>
        @for (serie of series(); track serie.label) {
          <polyline
            [attr.points]="serie.points"
            [attr.stroke]="serie.color"
            fill="none"
            stroke-width="2"
            stroke-linejoin="round"
            stroke-linecap="round"
          ></polyline>
        }
      </svg>
      <div class="trend__axis">
        <span>{{ trend[0].observedAt | date: 'MM-dd HH:mm' }}</span>
        <span>{{ trend[trend.length - 1].observedAt | date: 'MM-dd HH:mm' }}</span>
      </div>
    </div>
    <div class="trend__legend">
      @for (serie of series(); track serie.label) {
        <div class="trend__legend-item">
          <span class="trend__bullet" [style.background]="serie.color"></span>
          {{ serie.label }}
        </div>
      }
    </div>
  }
</div>
